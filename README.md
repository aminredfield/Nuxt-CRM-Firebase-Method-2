
# Nuxt CRM Test

–ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —Ç–µ—Å—Ç–æ–≤–æ–µ CRM-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ –Ω–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º —Å—Ç–µ–∫–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Nuxt 4, Firebase –∏ TypeScript.

## üîó –ü—É–±–ª–∏—á–Ω–∞—è —Å—Å—ã–ª–∫–∞

**–î–æ–±–∞–≤—å—Ç–µ —Å—é–¥–∞ —Å—Å—ã–ª–∫—É –Ω–∞ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**

---

## üìã –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–≠—Ç–æ –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ CRM-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞–º–∏, –∫–ª–∏–µ–Ω—Ç–∞–º–∏ –∏ –∑–∞–¥–∞—á–∞–º–∏ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–µ–π —Å–≤—è–∑–µ–π —á–µ—Ä–µ–∑ Firebase Cloud Functions.

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:

- ‚úÖ **CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏** –¥–ª—è –ø—Ä–æ–µ–∫—Ç–æ–≤, –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏ –∑–∞–¥–∞—á
- ‚úÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–≤—è–∑—è–º–∏** –º–µ–∂–¥—É —Å—É—â–Ω–æ—Å—Ç—è–º–∏ (–∑–∞–¥–∞—á–∏ ‚Üî –ø—Ä–æ–µ–∫—Ç—ã ‚Üî –∫–ª–∏–µ–Ω—Ç—ã)
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è** —á–µ—Ä–µ–∑ Firebase Functions
- ‚úÖ **Reverse index** –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ –∑–∞–¥–∞—á –ø–æ –ø—Ä–æ–µ–∫—Ç–∞–º
- ‚úÖ **–õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞** —Å —ç–º—É–ª—è—Ç–æ—Ä–∞–º–∏ Firebase

---

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Frontend
- **[Nuxt 4.2.1](https://nuxt.com/)** ‚Äî —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π Vue.js —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **[Vue 3.5.24](https://vuejs.org/)** ‚Äî –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π JavaScript —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **[TypeScript](https://www.typescriptlang.org/)** ‚Äî —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π JavaScript
- **[Tailwind CSS 6.14.0](https://tailwindcss.com/)** ‚Äî —É—Ç–∏–ª–∏—Ç–∞—Ä–Ω—ã–π CSS —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **[Firebase SDK 12.6.0](https://firebase.google.com/)** ‚Äî –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Firestore –∏ Functions

### Backend
- **[Firebase Firestore](https://firebase.google.com/products/firestore)** ‚Äî NoSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- **[Firebase Functions](https://firebase.google.com/products/functions)** (v2) ‚Äî —Å–µ—Ä–≤–µ—Ä–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- **[Firebase Admin SDK 12.6.0](https://firebase.google.com/docs/admin/setup)** ‚Äî —Å–µ—Ä–≤–µ—Ä–Ω—ã–π SDK
- **Node.js 22** ‚Äî —Å—Ä–µ–¥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–ª—è Functions

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
nuxt-crm-test/
‚îú‚îÄ‚îÄ frontend/                  # Nuxt –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pages/            # –°—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ crud.vue      # CRUD –¥–ª—è –≤—Å–µ—Ö –∫–æ–ª–ª–µ–∫—Ü–∏–π
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ relation.vue  # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–≤—è–∑—è–º–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.vue     # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ plugins/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ firebase.client.ts  # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Firebase
‚îÇ   ‚îú‚îÄ‚îÄ modules/              # Nuxt Layer —Å reverse-index
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ pages/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ reverse-index.vue  # –ò–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏
‚îÇ   ‚îú‚îÄ‚îÄ package.json
‚îÇ   ‚îî‚îÄ‚îÄ nuxt.config.ts
‚îÇ
‚îú‚îÄ‚îÄ functions/                # Firebase Cloud Functions
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.ts         # –§—É–Ω–∫—Ü–∏–∏ CRUD –∏ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ package.json
‚îÇ   ‚îî‚îÄ‚îÄ tsconfig.json
‚îÇ
‚îú‚îÄ‚îÄ firebase.json             # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Firebase
‚îú‚îÄ‚îÄ firestore.rules          # –ü—Ä–∞–≤–∏–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ Firestore
‚îî‚îÄ‚îÄ firestore.indexes.json   # –ö–æ–º–ø–æ–∑–∏—Ç–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã
```

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:
- **Node.js 22** –∏–ª–∏ –≤—ã—à–µ
- **npm** –∏–ª–∏ **yarn**
- **Firebase CLI**: `npm install -g firebase-tools`

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone <repository-url>
cd nuxt-crm-test
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Frontend

```bash
cd frontend
npm install
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Firebase Functions

```bash
cd ../functions
npm install
```

### 4. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Firebase

#### –í–∞—Ä–∏–∞–Ω—Ç –ê: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —ç–º—É–ª—è—Ç–æ—Ä–æ–≤ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –Ω–∞—á–∞–ª–∞)

–≠–º—É–ª—è—Ç–æ—Ä—ã –ø–æ–∑–≤–æ–ª—è—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ –±–µ–∑ —Å–æ–∑–¥–∞–Ω–∏—è Firebase –ø—Ä–æ–µ–∫—Ç–∞.

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —ç–º—É–ª—è—Ç–æ—Ä—ã (—Å–º. —Ä–∞–∑–¥–µ–ª "–õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞")
2. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–∫–ª—é—á–∏—Ç—Å—è –∫ –ª–æ–∫–∞–ª—å–Ω—ã–º —ç–º—É–ª—è—Ç–æ—Ä–∞–º

#### –í–∞—Ä–∏–∞–Ω—Ç –ë: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Ä–µ–∞–ª—å–Ω–æ–º—É Firebase –ø—Ä–æ–µ–∫—Ç—É

1. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –Ω–∞ [Firebase Console](https://console.firebase.google.com/)
2. –í–∫–ª—é—á–∏—Ç–µ **Firestore Database** –∏ **Cloud Functions**
3. –í–æ–π–¥–∏—Ç–µ –≤ Firebase CLI:
```bash
firebase login
```

4. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –ø—Ä–æ–µ–∫—Ç:
```bash
firebase init
# –í—ã–±–µ—Ä–∏—Ç–µ: Firestore, Functions, TypeScript
```

5. –ü–æ–ª—É—á–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Firebase:
   - Firebase Console ‚Üí ‚öôÔ∏è Project Settings ‚Üí Your apps ‚Üí Web app
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `firebaseConfig`

6. –û–±–Ω–æ–≤–∏—Ç–µ `frontend/app/plugins/firebase.client.ts`:
```typescript
const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "your-project.firebaseapp.com",
  projectId: "your-project-id",
  storageBucket: "your-project.appspot.com",
  messagingSenderId: "123456789",
  appId: "1:123456789:web:abcdef"
}
```

---

## üíª –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –ó–∞–ø—É—Å–∫ —ç–º—É–ª—è—Ç–æ—Ä–æ–≤ Firebase

–ò–∑ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞:

```bash
firebase emulators:start
```

–≠–º—É–ª—è—Ç–æ—Ä—ã –∑–∞–ø—É—Å—Ç—è—Ç—Å—è –Ω–∞ —Å–ª–µ–¥—É—é—â–∏—Ö –ø–æ—Ä—Ç–∞—Ö:
- **Firestore**: http://localhost:8080
- **Functions**: http://localhost:5001
- **Firebase UI**: http://localhost:4000 (–≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è)

### –ó–∞–ø—É—Å–∫ Frontend

–í –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:

```bash
cd frontend
npm run dev
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: **http://localhost:3000**

### –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:

- üè† **/** ‚Äî –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- ‚úèÔ∏è **/crud** ‚Äî CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è Projects, Clients, Tasks
- üîó **/relation** ‚Äî –°–≤—è–∑—ã–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á —Å –ø—Ä–æ–µ–∫—Ç–∞–º–∏ –∏ –∫–ª–∏–µ–Ω—Ç–∞–º–∏
- üìä **/reverse-index** ‚Äî –ü—Ä–æ—Å–º–æ—Ç—Ä –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∑–∞–¥–∞—á –ø–æ –ø—Ä–æ–µ–∫—Ç–∞–º

---

## üîß –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### Frontend (–∏–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `frontend/`)

```bash
# –†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å hot-reload
npm run dev

# –°–±–æ—Ä–∫–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
npm run build

# –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–æ–¥–∞–∫—à–µ–Ω —Å–±–æ—Ä–∫–∏
npm run preview

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–∞–π—Ç–∞
npm run generate
```

### Functions (–∏–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `functions/`)

```bash
# –õ–∏–Ω—Ç–∏–Ω–≥ –∫–æ–¥–∞
npm run lint

# –ö–æ–º–ø–∏–ª—è—Ü–∏—è TypeScript
npm run build

# –ö–æ–º–ø–∏–ª—è—Ü–∏—è –≤ —Ä–µ–∂–∏–º–µ watch
npm run build:watch

# –ó–∞–ø—É—Å–∫ —ç–º—É–ª—è—Ç–æ—Ä–æ–≤ —Å functions
npm run serve

# –î–µ–ø–ª–æ–π —Ñ—É–Ω–∫—Ü–∏–π –≤ Firebase
npm run deploy

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π
npm run logs
```

### Firebase (–∏–∑ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏)

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —ç–º—É–ª—è—Ç–æ—Ä–æ–≤
firebase emulators:start

# –ó–∞–ø—É—Å–∫ —Ç–æ–ª—å–∫–æ Firestore
firebase emulators:start --only firestore

# –ó–∞–ø—É—Å–∫ —Ç–æ–ª—å–∫–æ Functions
firebase emulators:start --only functions

# –î–µ–ø–ª–æ–π –≤—Å–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
firebase deploy

# –î–µ–ø–ª–æ–π —Ç–æ–ª—å–∫–æ Functions
firebase deploy --only functions

# –î–µ–ø–ª–æ–π —Ç–æ–ª—å–∫–æ Firestore –ø—Ä–∞–≤–∏–ª
firebase deploy --only firestore:rules

# –î–µ–ø–ª–æ–π —Ç–æ–ª—å–∫–æ –∏–Ω–¥–µ–∫—Å–æ–≤
firebase deploy --only firestore:indexes
```

---

## üóÑÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –ö–æ–ª–ª–µ–∫—Ü–∏–∏ Firestore:

#### `projects`
```typescript
{
  id: string,
  name: string,
  createdAt: Timestamp
}
```

#### `clients`
```typescript
{
  id: string,
  name: string,
  createdAt: Timestamp
}
```

#### `tasks`
```typescript
{
  id: string,
  name: string,
  projectId?: string | null,  // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å–≤—è–∑—å —Å –ø—Ä–æ–µ–∫—Ç–æ–º
  clientId?: string | null,   // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å–≤—è–∑—å —Å –∫–ª–∏–µ–Ω—Ç–æ–º
  createdAt: Timestamp
}
```

#### `projectTaskIndex` (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è Functions)
```typescript
{
  id: string,  // –§–æ—Ä–º–∞—Ç: "{projectId}_{taskId}"
  projectId: string,
  taskId: string,
  taskName: string | null,
  createdAt: Timestamp
}
```

---

## üìö Firebase Functions API

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ Cloud Functions –¥–ª—è CRUD –æ–ø–µ—Ä–∞—Ü–∏–π:

### Projects
- **`createProject(data: {name: string})`** ‚Äî –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
- **`listProjects()`** ‚Äî –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤
- **`deleteProject(data: {id: string})`** ‚Äî –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

### Clients
- **`createClient(data: {name: string})`** ‚Äî –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞
- **`listClients()`** ‚Äî –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
- **`deleteClient(data: {id: string})`** ‚Äî –£–¥–∞–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞

### Tasks
- **`createTask(data: {name: string})`** ‚Äî –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏
- **`listTasks()`** ‚Äî –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö –∑–∞–¥–∞—á
- **`updateTask(data: {id: string, projectId?: string, clientId?: string})`** ‚Äî –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–≤—è–∑–µ–π –∑–∞–¥–∞—á–∏
- **`deleteTask(data: {id: string})`** ‚Äî –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏

### Trigger Functions
- **`onTaskWrite`** ‚Äî –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏/–∏–∑–º–µ–Ω–µ–Ω–∏–∏/—É–¥–∞–ª–µ–Ω–∏–∏ –∑–∞–¥–∞—á–∏
  - –û–±–Ω–æ–≤–ª—è–µ—Ç `projectTaskIndex` –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ `projectId`
  - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –∏–Ω–¥–µ–∫—Å–∞ —Å –¥–∞–Ω–Ω—ã–º–∏

### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –∫–æ–¥–µ:

```typescript
import { httpsCallable } from 'firebase/functions'

const { $functions } = useNuxtApp()

// –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç
const createProjectFn = httpsCallable($functions, 'createProject')
await createProjectFn({ name: "–ù–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç" })

// –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–µ–∫—Ç–æ–≤
const listProjectsFn = httpsCallable($functions, 'listProjects')
const result = await listProjectsFn()
console.log(result.data.items)

// –û–±–Ω–æ–≤–∏—Ç—å —Å–≤—è–∑–∏ –∑–∞–¥–∞—á–∏
const updateTaskFn = httpsCallable($functions, 'updateTask')
await updateTaskFn({ 
  id: taskId, 
  projectId: selectedProjectId,
  clientId: selectedClientId 
})
```

---

## ‚ö° –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **Firebase Cloud Function** `onTaskWrite`, –∫–æ—Ç–æ—Ä–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

1. **–û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è** –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ `tasks`
2. **–û–±–Ω–æ–≤–ª—è–µ—Ç –∏–Ω–¥–µ–∫—Å** `projectTaskIndex`
3. **–£–¥–∞–ª—è–µ—Ç —Å—Ç–∞—Ä—ã–µ –∑–∞–ø–∏—Å–∏** –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å–≤—è–∑–µ–π –∏–ª–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∑–∞–¥–∞—á–∏
4. **–°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–µ –∑–∞–ø–∏—Å–∏** –¥–ª—è –Ω–æ–≤—ã—Ö —Å–≤—è–∑–µ–π

–≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:
- üöÄ –ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ –∑–∞–¥–∞—á –ø–æ –ø—Ä–æ–µ–∫—Ç–∞–º
- üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é
- üìä –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã —Å –∫–æ–º–ø–æ–∑–∏—Ç–Ω—ã–º–∏ –∏–Ω–¥–µ–∫—Å–∞–º–∏

### –ö–æ–º–ø–æ–∑–∏—Ç–Ω—ã–π –∏–Ω–¥–µ–∫—Å

–û–ø—Ä–µ–¥–µ–ª–µ–Ω –≤ `firestore.indexes.json`:

```json
{
  "indexes": [
    {
      "collectionGroup": "projectTaskIndex",
      "queryScope": "COLLECTION",
      "fields": [
        {
          "fieldPath": "projectId",
          "order": "ASCENDING"
        },
        {
          "fieldPath": "createdAt",
          "order": "DESCENDING"
        }
      ]
    }
  ]
}
```

–ü–æ–∑–≤–æ–ª—è–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ `projectId` –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ `createdAt`.

---

## üé® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### Nuxt Layer
–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **Nuxt Layer** –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É:
- –°—Ç—Ä–∞–Ω–∏—Ü–∞ `reverse-index.vue` –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –º–æ–¥—É–ª–µ `modules/`
- –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –º–µ–∂–¥—É –ø—Ä–æ–µ–∫—Ç–∞–º–∏
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ `modules/app.config.ts`

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —ç–º—É–ª—è—Ç–æ—Ä–∞–º
–í `firebase.client.ts` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```typescript
if (import.meta.dev) {
  connectFirestoreEmulator(firestore, 'localhost', 8080)
  connectFunctionsEmulator(functions, 'localhost', 5001)
}
```

### TypeScript —Å—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è
- –í–µ—Å—å –∫–æ–¥ –ø–æ–∫—Ä—ã—Ç TypeScript —Ç–∏–ø–∞–º–∏ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è Project, Client, Task
- –¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤—ã–∑–æ–≤—ã Functions

### Tailwind CSS
- Utility-first –ø–æ–¥—Ö–æ–¥ –¥–ª—è –±—ã—Å—Ç—Ä–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ UI
- –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä CSS –±–ª–∞–≥–æ–¥–∞—Ä—è JIT –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä—É

---

## üì¶ –î–µ–ø–ª–æ–π –≤ –ø—Ä–æ–¥–∞–∫—à–Ω

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ Functions

```bash
cd functions
npm run build
```

### 2. –î–µ–ø–ª–æ–π Firebase Functions –∏ Firestore

```bash
# –ò–∑ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
firebase deploy
```

–ò–ª–∏ –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏:

```bash
firebase deploy --only functions
firebase deploy --only firestore:rules
firebase deploy --only firestore:indexes
```

### 3. –°–±–æ—Ä–∫–∞ Frontend

```bash
cd frontend
npm run build
```

### 4. –î–µ–ø–ª–æ–π Frontend

Frontend –º–æ–∂–Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –Ω–∞:

#### Firebase Hosting

```bash
# –î–æ–±–∞–≤—å—Ç–µ –≤ firebase.json:
{
  "hosting": {
    "public": "frontend/.output/public",
    "ignore": ["firebase.json", "**/.*", "**/node_modules/**"],
    "rewrites": [
      {
        "source": "**",
        "destination": "/index.html"
      }
    ]
  }
}

# –î–µ–ø–ª–æ–π:
firebase deploy --only hosting
```

#### Vercel (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è Nuxt)

```bash
cd frontend
npm i -g vercel
vercel --prod
```

#### Netlify

```bash
cd frontend
npm run build
# –ó–∞–≥—Ä—É–∑–∏—Ç–µ .output/public –Ω–∞ Netlify
```

#### Cloudflare Pages

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
# Build command: npm run build
# Output directory: .output/public
```

---

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–∞–Ω–Ω—ã—Ö –≤ —ç–º—É–ª—è—Ç–æ—Ä–∞—Ö

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —ç–º—É–ª—è—Ç–æ—Ä–æ–≤ –æ—Ç–∫—Ä–æ–π—Ç–µ: **http://localhost:4000**

–ó–¥–µ—Å—å –º–æ–∂–Ω–æ:
- –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ Firestore
- –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –≤—ã–∑–æ–≤—ã Functions
- –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –ª–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –û—á–∏—â–∞—Ç—å –¥–∞–Ω–Ω—ã–µ

### –õ–æ–≥–∏ Functions

```bash
# –õ–æ–∫–∞–ª—å–Ω–æ (–≤ —ç–º—É–ª—è—Ç–æ—Ä–∞—Ö)
# –õ–æ–≥–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –≥–¥–µ –∑–∞–ø—É—â–µ–Ω—ã —ç–º—É–ª—è—Ç–æ—Ä—ã

# –í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
firebase functions:log

# –°–ª–µ–¥–∏—Ç—å –∑–∞ –ª–æ–≥–∞–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
firebase functions:log --follow
```

### Vue DevTools

Nuxt 4 –≤–∫–ª—é—á–∞–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ DevTools:
- –û—Ç–∫—Ä–æ—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ `npm run dev`
- –ü–æ–∑–≤–æ–ª—è—é—Ç –∏–Ω—Å–ø–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –º–∞—Ä—à—Ä—É—Ç—ã, payload

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

**Port —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:**
```bash
lsof -ti:5001,8080,4000 | xargs kill -9
```

**Functions –Ω–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è:**
```bash
cd functions
npm run build
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —ç–º—É–ª—è—Ç–æ—Ä—ã
```

**Firebase –Ω–µ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ:**
```typescript
// –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–Ω—É—Ç—Ä–∏ setup(), –Ω–µ –Ω–∞ –≤–µ—Ä—Ö–Ω–µ–º —É—Ä–æ–≤–Ω–µ
const { $firestore, $functions } = useNuxtApp()
```

**CORS –æ—à–∏–±–∫–∞:**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `onCall` —Ñ—É–Ω–∫—Ü–∏–∏ –≤–º–µ—Å—Ç–æ `onRequest`
- CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–ª—è `onCall`

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚ö†Ô∏è **–í–ê–ñ–ù–û**: –¢–µ–∫—É—â–∏–µ –ø—Ä–∞–≤–∏–ª–∞ –≤ `firestore.rules` –æ—Ç–∫—Ä—ã—Ç—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.

–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–∞–≤–∏–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:

```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // –ü—Ä–∏–º–µ—Ä: —Ç—Ä–µ–±–æ–≤–∞—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é
    match /projects/{projectId} {
      allow read, write: if request.auth != null;
    }
    
    match /clients/{clientId} {
      allow read, write: if request.auth != null;
    }
    
    match /tasks/{taskId} {
      allow read, write: if request.auth != null;
    }
    
    // –ò–Ω–¥–µ–∫—Å —Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è (–∏–∑–º–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ Functions)
    match /projectTaskIndex/{indexId} {
      allow read: if request.auth != null;
      allow write: if false;
    }
  }
}
```

–î–µ–ø–ª–æ–π –ø—Ä–∞–≤–∏–ª:
```bash
firebase deploy --only firestore:rules
```

---

## üìù TODO / –ò–¥–µ–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è

- [ ] –î–æ–±–∞–≤–∏—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (Firebase Auth)
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–∞–≥–∏–Ω–∞—Ü–∏—é –¥–ª—è –±–æ–ª—å—à–∏—Ö —Å–ø–∏—Å–∫–æ–≤
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ –∑–∞–¥–∞—á–∞–º
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å real-time updates —á–µ—Ä–µ–∑ Firestore snapshots
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã (Unit —Å Vitest, E2E —Å Playwright)
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ä–æ–ª–∏ –∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–∏–∫—Ä–µ–ø–ª—è—Ç—å —Ñ–∞–π–ª—ã –∫ –∑–∞–¥–∞—á–∞–º (Firebase Storage)
- [ ] –°–æ–∑–¥–∞—Ç—å –¥–∞—à–±–æ—Ä–¥ —Å –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π
- [ ] –î–æ–±–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- [ ] –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –≤ CSV/Excel
- [ ] –¢–µ–º–Ω–∞—è —Ç–µ–º–∞

---

## ü§ù –ö–æ–Ω—Ç—Ä–∏–±—É—Ü–∏—è

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –≤–Ω–µ—Å—Ç–∏ –≤–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç:

1. –§–æ—Ä–∫–Ω–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –°–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ç–∫—É –¥–ª—è –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ (`git checkout -b feature/amazing-feature`)
3. –ó–∞–∫–æ–º–º–∏—Ç—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (`git commit -m 'Add amazing feature'`)
4. –ó–∞–ø—É—à—å—Ç–µ –≤–µ—Ç–∫—É (`git push origin feature/amazing-feature`)
5. –û—Ç–∫—Ä–æ–π—Ç–µ Pull Request

### –ì–∞–π–¥–ª–∞–π–Ω—ã:
- –°–ª–µ–¥—É–π—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º—É —Å—Ç–∏–ª—é –∫–æ–¥–∞
- –î–æ–±–∞–≤–ª—è–π—Ç–µ TypeScript —Ç–∏–ø—ã
- –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ª–æ–∫–∞–ª—å–Ω–æ —Å —ç–º—É–ª—è—Ç–æ—Ä–∞–º–∏
- –û–±–Ω–æ–≤–ª—è–π—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

---

## üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã (`npm install`)
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —ç–º—É–ª—è—Ç–æ—Ä—ã Firebase –∑–∞–ø—É—â–µ–Ω—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫ (F12)
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Functions –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ —ç–º—É–ª—è—Ç–æ—Ä–æ–≤
5. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Node.js 22

---

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [Nuxt 4 Documentation](https://nuxt.com/docs)
- [Vue 3 Composition API](https://vuejs.org/guide/introduction.html)
- [Firebase Documentation](https://firebase.google.com/docs)
- [Firestore Documentation](https://firebase.google.com/docs/firestore)
- [Cloud Functions Documentation](https://firebase.google.com/docs/functions)
- [Tailwind CSS Documentation](https://tailwindcss.com/docs)
- [TypeScript Documentation](https://www.typescriptlang.org/docs)

### –ü–æ–ª–µ–∑–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã
- [Nuxt Examples](https://nuxt.com/docs/examples)
- [Firebase Samples](https://github.com/firebase/quickstart-js)
- [Vue DevTools](https://devtools.vuejs.org/)
